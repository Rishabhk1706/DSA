https://leetcode.com/problems/maximum-number-of-operations-with-the-same-score-ii/

class Solution {
    int[][] dp;
    public int maxOperations(int[] nums) {
        int n = nums.length;
        dp = new int[n][n];
        for(int[] row : dp){
            Arrays.fill(row,-1);
        }
        int maxi=0;
        maxi = Math.max(maxi,1 + helper(2,n-1,nums,nums[0]+nums[1]));
        maxi = Math.max(maxi,1 + helper(0,n-3,nums,nums[n-1]+nums[n-2]));
        maxi = Math.max(maxi,1 + helper(1,n-2,nums,nums[0]+nums[n-1]));
        return maxi;
    }
    private int helper(int l, int r, int[] nums, int val){
        if(l>=r) return 0;
        if(dp[l][r]!=-1) return dp[l][r];
        int maxi=0;
        if(nums[l]+nums[l+1]==val){
            maxi = Math.max(maxi,1 + helper(l+2,r,nums,val));
        }
        if(nums[r]+nums[r-1]==val){
            maxi = Math.max(maxi,1 + helper(l,r-2,nums,val));
        }
        if(nums[l]+nums[r]==val){
            maxi = Math.max(maxi,1 + helper(l+1,r-1,nums,val));
        }
        return dp[l][r] = maxi;
    }
}